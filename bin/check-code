#!/usr/bin/env bash
set -e

echo "ğŸ” Running code quality checks..."

echo "1ï¸âƒ£  Scan Ruby..."
if ! bin/brakeman --no-pager; then
  echo "âŒ Brakeman failed. Please fix the issues above."
  exit 1
fi

echo "2ï¸âƒ£  Lint Tests..."
if ! bin/rubocop; then
  echo "âŒ RuboCop failed. Please fix the issues above."
  exit 1
fi

echo "3ï¸âƒ£  Tests..."
if ! bin/rails db:test:prepare test test:system; then
  echo "âŒ Rails Tests failed. Please fix the failing tests."
  exit 1
fi

echo "âœ… All checks passed! Ready to commit."
