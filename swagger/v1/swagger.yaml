---
openapi: 3.0.1
info:
  title: Kamil Lee's Blog API
  version: v1
  description: API documentation for Kamil Lee's development blog built with Rails
    8
  contact:
    name: Kamil Lee
    email: lazaronixon@hotmail.com
paths:
  "/members/api/session":
    get:
      summary: Get current session information
      tags:
      - Members API
      - Authentication
      description: Returns current session information including authentication status
        and user details
      responses:
        '200':
          description: unauthenticated session
          content:
            application/json:
              schema:
                type: object
                properties:
                  authenticated:
                    type: boolean
                    example: false
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                      email:
                        type: string
                        format: email
                      name:
                        type: string
                      verified:
                        type: boolean
                    required:
                    - id
                    - email
                    - name
                    - verified
                  identity:
                    type: string
                    description: Identity token for user verification
                    nullable: true
                required:
                - authenticated
                - identity
    delete:
      summary: Logout and destroy current session
      tags:
      - Members API
      - Authentication
      description: Destroys the current session and logs out the user
      security:
      - session_token: []
      responses:
        '200':
          description: successfully logged out
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Successfully logged out
                required:
                - success
                - message
        '401':
          description: no active session
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: No active session
                required:
                - success
                - error
  "/search":
    get:
      summary: Search blog posts
      tags:
      - Search
      description: Search for blog posts by query and optionally filter by category
      parameters:
      - name: q
        in: query
        required: false
        description: Search query
        schema:
          type: string
      - name: category
        in: query
        required: false
        description: Category filter
        schema:
          type: string
      responses:
        '200':
          description: empty query returns empty results
          content:
            application/json:
              schema:
                type: object
                properties:
                  query:
                    type: string
                    nullable: true
                  category:
                    type: string
                    nullable: true
                  total:
                    type: integer
                  posts:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        title:
                          type: string
                        slug:
                          type: string
                        excerpt:
                          type: string
                          nullable: true
                        category:
                          type: string
                        author_name:
                          type: string
                        published_at:
                          type: string
                          format: date
                          nullable: true
                        reading_time:
                          type: integer
                        path:
                          type: string
                        featured_image:
                          type: string
                          nullable: true
                      required:
                      - id
                      - title
                      - slug
                      - category
                      - author_name
                      - reading_time
                      - path
                required:
                - total
                - posts
servers:
- url: http://localhost:3000
  description: Development server
- url: https://{defaultHost}
  variables:
    defaultHost:
      default: www.example.com
  description: Production server
components:
  securitySchemes:
    session_token:
      type: apiKey
      name: session_token
      in: cookie
      description: Session token stored in signed cookie
  schemas:
    error_object:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: Error message
    post:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        slug:
          type: string
        content:
          type: string
        excerpt:
          type: string
        category:
          type: string
        author_name:
          type: string
        author_avatar:
          type: string
        published_at:
          type: string
          format: date-time
          nullable: true
        featured:
          type: boolean
        featured_image:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
      - id
      - title
      - slug
    user:
      type: object
      properties:
        id:
          type: integer
        email:
          type: string
          format: email
        nickname:
          type: string
        verified:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
      - id
      - email
      - verified
    session:
      type: object
      properties:
        id:
          type: integer
        user_id:
          type: integer
        user_agent:
          type: string
          nullable: true
        ip_address:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
      - id
      - user_id
